# 🔴 기술 면접

30~40분 정도 진행되었음.

## 🟠 기본 진행

### 🟢 자기소개

```text
준비된 자기소개 완료
```

### 🟢 이직사유

```text
준비된 이직 사유 완료
```

## 🟠 경력 질문

### 🟢 OOM 문제 해결을 하셨던데 자세히 설명 부탁드립니다.

```text
정상적으로 운영되던 시스템이 주말간에 갑자기 OOM으로 다운되는 문제가 있었습니다.
다행히 jvm 옵션에 oom 발생시 jmap heap dump 파일을 담기도록 되어 있어 해당 파일을 intellij를 통해 분석하였고
메모리를 가장 많이 사용하는 객체부터 의심했고 정상적으로 운영되다가 갑자기 발생한 문제로 깃로그를 통해 최근에 수정된 내역을 추적했습니다.
그 결과 LinkedBlockingQueue 객체가 문제가 있을거라 생각되었고 로직이 queue에 insert하는 곳은 병렬 쓰레드로 빠르게 넣고
read하는 곳은 단일 쓰레드로 읽어내기 때문에 속도의 차이가 있어 oom이 발생했다 판단했고 코드 레벨에서 분석해보니
카파를 설정해두면 카파를 넘어가면 내부적으로 await을 통해 성능을 포기했지만 안정성을 선택한 trade off 경험이였습니다.  
```

-> 내 장황한 말들을 정확히 이해하시고 정리해서 다시 말해주시면서 이해했다고 하심

### 🟢 병렬 쓰레드면 read 하는 곳에서도 병렬로 넣으면 되지 않았나?

```text
네 저도 먼저 로직을 수정하려고 했는데요. 해당 시스템이 레거시 시스템이라 로직상 프로시저와 로직들이 함께 있었고
테이블 구조도 temp 테이블이 중간에 있는 등 DB팀과의 협업도 필요한 부분이라
팀장님께서 이 부분을 수정하면서 생기는 사이드 이펙트가 더 클거 같다고 피드백을 주셔서 해당 부분을 수정할 순 없다고 판단했습니다.
```

### 🟢 Redis를 사용하여 캐싱과 동시성 문제를 해결한 경험이 있던데 그 부분 설명 부탁드려요.

```text
main 화면에서 트래픽이 몰려 서버 부하로 응답이 느리게 되는 문제가 발생했었습니다.
해당 문제 해결을 위해 Redis의 고정된 키값을 통해 반환 값을 저장해두고 캐싱된 데이터로 반환되도록 처리하여 응답 시간을 줄인 경험이였습니다.
또한 TTL 5분을 걸어 데이터중 랜덤으로 변경되는 부분이 있었는데 그 부분은 지금 생각해보면 배치를 통해 업데이트를 해주어
모든 유저의 사용 경험을 개선했어야 하는 아쉬움이 있습니다.
```

### 🟢 트랜잭션 데드락이 어떤 문제였고 해결했던 경험도 설명 부탁드려요.

```text
해당 문제는 트랜잭션이 너무 크게 묶여 있어 다른 서비스에서 해당 테이블에 접근하는 경우가 많아 데드락이 발생하는 문제가 있었습니다.
우선 데드락 해결을 위해 큰 로직을 역할별로 나누어서 트랜잭션을 나누었습니다. 그러다 보니 오히려 데드락이 더 많이 발생했고
그 문제는 쿼리에서 insert 쿼리 내부에 서브쿼리가 있어 문제가 되는 것이였습니다. 그 부분을 튜닝하여 문제를 해결할 수 있었습니다.
```

## 🟠 기술 문화 질문


### 🟢 현재 팀규모는 어떻게 되나요?

```text
저 포함 백엔드 8명 입니다.
```

### 🟢 팀에서 각자 프로젝트를 담당하는 구조였나요?

```text
처음 입사시에는 셀 단위로 진행하여서 2명이 한조로 묶였었고
현재는 1명당 주요 프로젝트를 담당하고 나머지 프로젝트들은 전체적으로 리소스가 있는 개발자들이 돌아가면서 돕는 형식으로 진행하고 있습니다.
```

### 🟢 PR 리뷰는 해보셨나요?

```text
팀에서 모든 PR에 리뷰는 하지 않고 PR을 올린 후 담당자가 확인하여 리뷰가 필요한 경우에만 리뷰를 진행하였습니다.
```

### 🟢 테스트 코드 작성은 해보셨나요?

```text
팀 자체적으로 테스트코드를 강제하진 않았고 그 부분이 제 불만인 부분이였습니다.
그래서 최대한 class를 가장 작은 단위로 나누어서 핵심 로직만 테스트하는 유닛 테스트를 작성하였습니다.
```

## 🟠 java 질문

### 🟢 Object의 equal을 직접 구현해보신 적이 있나요?

```text
비교 연산자를 직접 구현해 본적은 없습니다.
String이나 int와 같은 데이터 형식을 비교해본 경험은 있는데 equals를 구현하여 비교한 경험은 없습니다.
```

### 🟢 그럼 Object 값은 어떻게 비교할 수 있을까요?

```text
지금 만약 비교를 구현한다고 한다면 내부적인 id 값을 통해 비교할 수 있을것 같습니다.
```

-> 유니크한 값을 꺼내서 비교하신다는거죠? 알겠습니다.


### 🟢 hash table에 대해 설명해주세요.

```text
hash로 설명드리겠습니다.
데이터를 저장하기 위해 hash function을 통해 데이터를 해싱하여 키값으로 합니다.
해시 테이블에 해당 키값과 데이터를 저장하고 이 과정에서 hash 충돌이 발생한다면
java 내부적으로는 bucket을 통해 관리하며 linkedList형태로 저장됩니다.
일정 크기가 넘어가면 성능을 위해 tree 구조로 변경하여 저장합니다. 
```

### 🟢 hash function의 종류에 대해 설명해주세요.

```text
그 부분까진 제가 알고 있지 않습니다. 죄송합니다.
```

### 🟢 hash 충돌이 일어나는 이유가 뭔가요?

```text
해시 값이 동일한 경우 충돌이 일어나는 것으로 아는데요. 랜덤한 해시값을 통해 키값을 만들다가 중복되는 경우로 알고 있습니다.
```

### 🟢 hashing이 랜덤한 값인가요?

```text
죄송합니다 그 부분은 제가 솔직히 확실하게 말씀드리기 어려울 것 같습니다.
```

### 🟢 JVM 구조에 대해 설명 부탁드려요. 그리고 해당 구역별 설명도 부탁드립니다.

```text
JVM은 method, heap, stack, pc register, native area로 이루어져 있고
method는 class나 static 객체를 저장하고
heap은 new 키워드로 생성된 객체를 저장
stack은 메서드의 실행 순서와 메서드 내에 임시 데이터들을 저장
pc register는 쓰레드의 실행 주고
native area는 os 연산시 사용되는 것으로 알고 있습니다.
```

### 🟢 그럼 Integer와 int 객체를 생성했을 때 각 객체들은 어떤 메모리에 저장될까요?

```text
해당 부분은 지금 답변 드리긴 제가 어려운것 같습니다. 죄송합니다.
```

## 🟠 Spring 질문

### 🟢 Lombok을 사용하시나요?

```text
네 사용합니다.
```

### 🟢 그럼 @Data나 @Value와 같은 어노테이션을 사용하시나요?

```text
@Data는 사용하지 않습니다. 자동으로 ToString이나 Setter가 구현되기 때문에 사용하지 않습니다.
```

### 🟢 그럼 주로 사용하는 어노테이션은 어떤걸 사용하나요?

```text
@Getter, @NoArgumentConstructor, @AllArgumentConstructor 정도를 사용합니다.
```

### 🟢 현재 팀에서 사용하고 있는 java 버전은 어떻게 되나요?

```text
17, 21을 사용하고 있습니다.
```

### 🟢 Record 사용해보셨나요?

```text
네 사용해보았습니다.
```

-> 처음에 Record로 안들리고 잘 안들려서 dot net으로 들어서 dot net이 뭘까요?로 물어보다가 Record라고 해주셔서 사용해보았다고 함.
 

## 🟠 DB 질문

### 🟢 주로 사용해보신 DB 종류가 어떻게 되시나요?

```text
MySql 위주로 사용해보았습니다.
```

### 🟢 MySql에 대해 공부해보신 경험이 있으신가요?

```text
깊게 공부해본 적은 없고 B-Tree 구조를 사용한다는 정도 알고 있습니다.
```

### 🟢 그 부분에 대해 자세히 설명 해주실 수 있나요?

```text
DB는 인덱스를 B-Tree와 B+Tree로 구현하고 있는데. 
실질적으로는 검색시 성능을 위해 B+Tree를 통해 인덱스를 구현하고 있다고 알고 있습니다. 
```

### 🟢 B-Tree와 B+Tree 차이점에 대해 자세히 설명 부탁드려요

```text
B+Tree의 경우 데이터를 가장 마지막 리프에 저장하고 연결하여 범위 검색시 유리하게 적용할 수 있습니다.
B-Tree는 연결되어 있지 않아 범위 검색시 전부 탐색을 해야되기 때문에 성능적으로 B+Tree가 유리하다고 알고 있습니다.
```

### 🟢 B+Tree가 어떤 구조로 연결되어 있어 범위 검색에 유리한지 아시나요?

```text
자료구조에서 LinkedList 구조와 같이 연결되어 있어서 만약 20~50의 범위 탐색을 한다면
B+Tree의 경우는 탐색을 통해 20을 먼저 찾고 그 이후 연결된 리프들을 통해 20~50까지 한번에 검색이 가능하여 범위 검색에 유리합니다.
```

### 🟢 인덱스에 대해서도 아시나요?

```text
인덱스에 대해서는 복합 인덱스를 구성할 때 연산, 정렬, 범위, 카디널리티와 같은 순서로 고려해야 한다 알고 있습니다.
```

### 🟢 그럼 만약 인덱스를 걸었는데 10 이상으로 조건 검색을 할때 인덱싱이 안될수도 있나요?

```text
그 부분까진 제가 잘 파악하지 못하고 있습니다. 죄송합니다.
```

### 🟢 그럼 혹시 인덱스를 걸고 쿼리를 확인할때 어떤 방법을 사용하시나요?

```text
explain을 사용하여서 인덱싱이 잘 걸렸는지와 type등을 체크합니다.
```

## 🟠 마지막 질문(내가 CTO님께 질문)

### 🟢 100프로 리모트 근무로 알고 있는데 커뮤니케이션은 어떻게 하고 있으신지 궁금합니다.

```text
우선 슬랙을 사용해서 1:1 대화나 단체 회의를 자주 진행하고 기능을 만들때 문서화를 통해 커뮤니케이션 하고 있다.
만약 문제가 발생하면 그때마다도 장애보고서를 작성하여 공유하고 있다.
```

### 🟢 커스터마이징한 기능을 제공하려면 아키텍쳐적으로 고민이 있으셨을거 같은데 팀에서 사용하는 아키텍쳐가 궁금합니다.

```text
헥사고날 아키텍쳐라고 말하면 될거 같은데 회사별 기능이 많다보니 3단계 layer로만 나누진 않고 여러 layer로 구분되어 있다.
하이브리드 형식이라 생각하시면 될거 같고 각 기능은 interface로서 회사별로 구현체만 적용하면 구현되도록 설계구조를 가지고 가고 있다.
```

### 🟢 테스트 코드는 어떤 방식으로 작성하고 계신가?

```text
테스트 코드는 핵심 로직을 유닛 테스트로서 작성하는 부분은 강제적으로 진행하고 있다.
그 외에 통합 테스트의 경우는 담당자가 진행하면서 필요하다고 생각하는 경우에 작성하고 있다.
```

